;/*FB_PKG_DELIM*/

__d("PolarisStoriesV3AdsPoolQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7509815052434303"}),null);
__d("PolarisStoriesV3AdsPoolQuery.graphql",["PolarisStoriesV3AdsPoolQuery_instagramRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"data"}],c=[{kind:"Variable",name:"data",variableName:"data"}],d={alias:null,args:null,kind:"ScalarField",name:"ad_id",storageKey:null},e={alias:null,args:null,concreteType:"XDTClientGapRulesClientDict",kind:"LinkedField",name:"client_gap_rules",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"highest_position_rule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reel_gap_to_previous_ad",storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"expiring_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},h=[g],i={alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:h,storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},k={kind:"InlineDataFragmentSpread",name:"getPolarisStoriesV3AdUsername_ad",selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[j],storageKey:null}],storageKey:null}],args:null,argumentDefinitions:[]},l={alias:null,args:null,kind:"ScalarField",name:"ads_pool_threshold_for_next_request",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"earliest_request_position",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"misinformation_type",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"overlay_layout",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"overlay_type",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},v={alias:null,args:null,concreteType:"XDTIconSpec",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"icon_glyph",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"icon_type",storageKey:null},u,{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null}],storageKey:null},w=[{alias:null,args:null,kind:"ScalarField",name:"dark",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"light",storageKey:null}],x={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null};w=[{alias:null,args:null,kind:"ScalarField",name:"action",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"button_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_chevron",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"is_text_centered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"secondary_text",storageKey:null},{alias:null,args:null,concreteType:"XDTTextColorSpec",kind:"LinkedField",name:"secondary_text_color",plural:!1,selections:w,storageKey:null},x,{alias:null,args:null,concreteType:"XDTTextColorSpec",kind:"LinkedField",name:"text_color",plural:!1,selections:w,storageKey:null}];var y={alias:null,args:null,concreteType:"XDTButtonSpec",kind:"LinkedField",name:"banner",plural:!1,selections:w,storageKey:null},z={alias:null,args:null,concreteType:"XDTBloksRenderResponse",kind:"LinkedField",name:"bloks_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null}],storageKey:null};w={alias:null,args:null,concreteType:"XDTButtonSpec",kind:"LinkedField",name:"buttons",plural:!0,selections:w,storageKey:null};var A={alias:null,args:null,kind:"ScalarField",name:"overlay_applied_timestamp",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"sub_category",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"background_color",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"rotation",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},N=[J,K,F,D,L,n],O=[I];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisStoriesV3AdsPoolQuery",selections:[{alias:null,args:c,concreteType:"XDTAdMediaResponse",kind:"LinkedField",name:"xdt_injected_story_units",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTAdMediaItem",kind:"LinkedField",name:"ad_media_items",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"PolarisStoriesV3AdsPool_item",selections:[d,e,{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[f],storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisStoriesV3DesktopAdGalleryItem_ad"},{args:null,kind:"FragmentSpread",name:"PolarisStoriesV3MobileAdGalleryItem_ad"},{kind:"InlineDataFragmentSpread",name:"PolarisStoriesV3ReelGallery_ad",selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"PolarisStoriesV3NavigationContextProvider_medias"}],storageKey:null}],args:null,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"PolarisStoriesV3ReelLoggingContextProvider_ad",selections:[{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[g,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"PolarisStoriesV3BaseReelLoggingContextProvider_user"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PolarisStoriesV3BaseReelLoggingContextProvider_media"},{args:null,kind:"FragmentSpread",name:"usePolarisStoriesV3ReelMediaIds_medias"}],storageKey:null}],args:null,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"usePolarisStoriesV3PrefetchReelsRouteDefinitionsEffect_ad",selections:[i,k],args:null,argumentDefinitions:[]},{kind:"InlineDataFragmentSpread",name:"usePolarisStoriesV3ReelChangeHandler_ad",selections:[k,{kind:"InlineDataFragmentSpread",name:"getPolarisStoriesV3NextAdMediaId_ad",selections:[d,i],args:null,argumentDefinitions:[]}],args:null,argumentDefinitions:[]}],args:null,argumentDefinitions:[]}],storageKey:null},l,m],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisStoriesV3AdsPoolQuery",selections:[{alias:null,args:c,concreteType:"XDTAdMediaResponse",kind:"LinkedField",name:"xdt_injected_story_units",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTAdMediaItem",kind:"LinkedField",name:"ad_media_items",plural:!0,selections:[d,e,{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"items",plural:!0,selections:[f,n,g,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[g,{alias:null,args:null,concreteType:"XDTRelationshipInfoDict",kind:"LinkedField",name:"friendship_status",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"following",storageKey:null}],storageKey:null},j,n,o,{alias:null,args:null,kind:"ScalarField",name:"is_private",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"media_type",storageKey:null},{alias:null,args:null,concreteType:"XDTStoryMusicStickerTappableObject",kind:"LinkedField",name:"story_music_stickers",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTFlattenedMusicInfo",kind:"LinkedField",name:"music_asset_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"should_mute_audio_reason",storageKey:null}],storageKey:null},n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_audio",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link_text",storageKey:null},{alias:null,args:null,concreteType:"XDTStoryCTADict",kind:"LinkedField",name:"story_cta",plural:!0,selections:[{alias:null,args:null,concreteType:"XDTAdLink",kind:"LinkedField",name:"links",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"webUri",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"XDTSharingFrictionInfo",kind:"LinkedField",name:"sharing_friction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_have_sharing_friction",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bloks_app_url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"audience",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_viewer_reshare",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ig_media_sharing_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"product_type",storageKey:null},{alias:null,args:null,concreteType:"XDTMediaOverlayPayloadSchema",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[p,q,r,s,t,y,z,w,v,A,B,C],storageKey:null},{alias:null,args:null,concreteType:"XDTImageVersion2",kind:"LinkedField",name:"image_versions2",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTImageCandidate",kind:"LinkedField",name:"candidates",plural:!0,selections:[D,E,F],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"can_reshare",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carousel_media_count",storageKey:null},{alias:null,args:null,concreteType:"XDTMediaDict",kind:"LinkedField",name:"carousel_media",plural:!0,selections:[g,{alias:null,args:null,concreteType:"XDTMediaOverlayPayloadSchema",kind:"LinkedField",name:"media_overlay_info",plural:!1,selections:[y,z,w,p,v,q,A,r,s,B,C,t],storageKey:null},n,G,H],storageKey:null},{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"caption",plural:!1,selections:[x,I,{alias:null,args:null,kind:"ScalarField",name:"background_color_alpha",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text_size",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},H,G,{alias:null,args:null,kind:"ScalarField",name:"organic_tracking_token",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"taken_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_dash_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"number_of_qualities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_dash_manifest",storageKey:null},{alias:null,args:null,concreteType:"XDTVideoVersion",kind:"LinkedField",name:"video_versions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},E],storageKey:null},{alias:null,args:null,concreteType:"XDTMediaVCRTappableObject",kind:"LinkedField",name:"visual_comment_reply_sticker_info",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,concreteType:"XDTMediaVCRTappableData",kind:"LinkedField",name:"vcr_sticker",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"original_comment_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_media_code",storageKey:null}],storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTStoryBloksStickerDict",kind:"LinkedField",name:"story_bloks_stickers",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,concreteType:"XDTBloksStickerDataDict",kind:"LinkedField",name:"bloks_sticker",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTBloksStickerNativeProps",kind:"LinkedField",name:"sticker_data",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTBloksStickerNativePropsIGMention",kind:"LinkedField",name:"ig_mention",plural:!1,selections:[M,j],storageKey:null}],storageKey:null},n],storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTStoryLinkTappableObject",kind:"LinkedField",name:"story_link_stickers",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,concreteType:"XDTStoryLinkInfoDict",kind:"LinkedField",name:"story_link",plural:!1,selections:[E],storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTStoryHashtagTappableObject",kind:"LinkedField",name:"story_hashtags",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,concreteType:"XDTStoryHashtagDict",kind:"LinkedField",name:"hashtag",plural:!1,selections:[u,n],storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTStoryLocationTappableObject",kind:"LinkedField",name:"story_locations",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,concreteType:"XDTLocationDict",kind:"LinkedField",name:"location",plural:!1,selections:h,storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTStoryFeedMediaTappableObject",kind:"LinkedField",name:"story_feed_media",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,kind:"ScalarField",name:"media_code",storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTTextPostShareToIgStoryStickerTappableObject",kind:"LinkedField",name:"text_post_share_to_ig_story_stickers",plural:!0,selections:[J,K,F,D,L,{alias:null,args:null,concreteType:"XDTTextPostShareToIgStoryStickerDict",kind:"LinkedField",name:"text_post_share_to_ig_story_sticker",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attribution_url",storageKey:null}],storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"XDTStoryCountdownTappableObject",kind:"LinkedField",name:"story_countdowns",plural:!0,selections:N,storageKey:null},{alias:null,args:null,concreteType:"XDTStoryQuestionTappableObject",kind:"LinkedField",name:"story_questions",plural:!0,selections:N,storageKey:null},{alias:null,args:null,concreteType:"XDTStorySliderTappableObject",kind:"LinkedField",name:"story_sliders",plural:!0,selections:N,storageKey:null},{alias:null,args:null,concreteType:"XDTReelMediaBackground",kind:"LinkedField",name:"reel_media_background",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTMediaBackgroundColor",kind:"LinkedField",name:"top",plural:!1,selections:O,storageKey:null},{alias:null,args:null,concreteType:"XDTMediaBackgroundColor",kind:"LinkedField",name:"bottom",plural:!1,selections:O,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"video_duration",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview",storageKey:null},{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_unpublished",storageKey:null},o,j,n,{alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},M],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"display_fb_page_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ad_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tracking_token",storageKey:null}],storageKey:null},l,m],storageKey:null}]},params:{id:b("PolarisStoriesV3AdsPoolQuery_instagramRelayOperation"),metadata:{is_distillery:!0},name:"PolarisStoriesV3AdsPoolQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("PolarisStoriesV3AdsPool_item.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"PolarisStoriesV3AdsPool_item"};e.exports=a}),null);
__d("usePolarisStoriesV3IsReelSeen_reel.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePolarisStoriesV3IsReelSeen_reel",selections:[{kind:"InlineDataFragmentSpread",name:"getPolarisStoriesV3IsReelSeen_reel",selections:[{alias:null,args:null,kind:"ScalarField",name:"latest_reel_media",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seen",storageKey:null}],args:null,argumentDefinitions:[]}],type:"XDTReelDict",abstractKey:null};e.exports=a}),null);
__d("PolarisStoriesV3AdsPool",["CometRelay","FBLogger","PolarisStoriesV3AdsPoolQuery.graphql","PolarisStoriesV3AdsPool_item.graphql","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("PolarisStoriesV3AdsPoolQuery.graphql");a=function(){function a(){this.$2=new Map(),this.$3=new Set(),this.$4=[],this.$5=null,this.$6=!1,this.$7=0}a.getInstance=function(){this.$1==null&&(this.$1=new a());return this.$1};var e=a.prototype;e.getAdsCount=function(){this.$8();return this.$4.length};e.getNextAdWithIndex=function(a,b){var c=this.$9();if(c==null)return null;var d=c.data.client_gap_rules;if(b==null||b<0){var e;e=(e=d==null?void 0:d.highest_position_rule)!=null?e:1;a=a+e}else{d=(e=d==null?void 0:d.reel_gap_to_previous_ad)!=null?e:1;a=b+d}return{ad:c,index:a}};e.getAd=function(a){a=this.$2.get(a);if(a==null)throw c("FBLogger")("ig_web").mustfixThrow("Ad not found in ad pool");return a};e.setAdInserted=function(a){this.$4=this.$4.filter(function(b){return b.id!==a})};e.hideAd=function(a){this.$3.add(a)};e.shouldFetch=function(a){if(this.$6)return!1;if(this.$5==null)return!0;var b=this.$5.xdt_injected_story_units,c=b.ads_pool_threshold_for_next_request;b=b.earliest_request_position;c=this.getAdsCount()<=((c=c)!=null?c:0);a=b!=null&&a>=b;return c&&a};e.getRequestCount=function(){return this.$7};e.fetch=function(a,b){var e=this;b={data:{ad_and_netego_request_information:[],ad_request_index:b.adRequestIndex,entry_point_index:b.entryPointIndex,is_dark_mode:b.isDarkMode,is_prefetch:b.isPrefetch,num_items_in_pool:b.trayUserIds.length,tray_session_id:b.traySessionId,tray_user_ids:b.trayUserIds,viewer_session_id:b.viewerSessionId}};var f=d("relay-runtime").getRequest(j);f=d("relay-runtime").createOperationDescriptor(f,b);a.retain(f);f=d("CometRelay").fetchQuery(a,j,b);f.subscribe({complete:function(){var a;e.$6=!1;if(e.$5==null)return;(a=e.$5.xdt_injected_story_units.ad_media_items)==null?void 0:a.forEach(function(a){e.$10(a)})},error:function(a){c("FBLogger")("ig_web").catching(a).warn("Error fetching story ads"),e.$6=!1},next:function(a){e.$5=a},start:function(){e.$5=null,e.$6=!0,e.$7++}})};e.$10=function(a){a=d("CometRelay").readInlineData(i!==void 0?i:i=b("PolarisStoriesV3AdsPool_item.graphql"),a);if(this.$3.has(a.ad_id))return;if(this.$2.has(a.ad_id))return;var c={data:a,id:a.ad_id};this.$2.set(a.ad_id,c);this.$4.push(c)};e.$8=function(){this.$4=this.$4.filter(function(a){return((a=a.data.items[0].expiring_at)!=null?a:0)*1e3>Date.now()})};e.$9=function(){this.$8();return this.$4[0]};return a}();g["default"]=a}),98);
__d("usePolarisStoriesV3IsReelSeen",["CometRelay","getPolarisStoriesV3IsReelSeen","react","usePolarisStoriesV3IsReelSeen_reel.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).unstable_useMemoCache;function a(a){var e=j(2);a=d("CometRelay").useFragment(h!==void 0?h:h=b("usePolarisStoriesV3IsReelSeen_reel.graphql"),a);var f;e[0]!==a?(f=c("getPolarisStoriesV3IsReelSeen")(a),e[0]=a,e[1]=f):f=e[1];return f}g["default"]=a}),98);